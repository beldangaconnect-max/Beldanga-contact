package com.example.serviceapp;

public class ServiceProvider {

    private String name;
    private String phone;
    private String service;
    private String area;
    private boolean available;

    public ServiceProvider() {}

    public ServiceProvider(String name, String phone, String service, String area, boolean available) {
        this.name = name;
        this.phone = phone;
        this.service = service;
        this.area = area;
        this.available = available;
    }

    public String getName() {
        return name == null ? "No Name" : name;
    }

    public String getPhone() {
        return phone == null ? "" : phone;
    }

    public String getService() {
        return service == null ? "" : service;
    }

    public String getArea() {
        return area == null ? "" : area;
    }

    public boolean isAvailable() {
        return available;
    }
}
package com.example.serviceapp;

import android.content.*;
import android.net.Uri;
import android.view.*;
import android.widget.*;
import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;
import java.util.List;

public class ProviderAdapter extends RecyclerView.Adapter<ProviderAdapter.ViewHolder> {

    Context context;
    List<ServiceProvider> list;

    public ProviderAdapter(Context context, List<ServiceProvider> list) {
        this.context = context;
        this.list = list;
    }

    @NonNull
    @Override
    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View v = LayoutInflater.from(context).inflate(R.layout.item_provider, parent, false);
        return new ViewHolder(v);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
        ServiceProvider p = list.get(position);

        holder.name.setText(p.getName());
        holder.phone.setText(p.getPhone());
        holder.service.setText(p.getService());

        holder.call.setOnClickListener(v -> {
            Intent i = new Intent(Intent.ACTION_DIAL);
            i.setData(Uri.parse("tel:" + p.getPhone()));
            context.startActivity(i);
        });
    }

    @Override
    public int getItemCount() {
        return list.size();
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        TextView name, phone, service;
        Button call;

        ViewHolder(View item) {
            super(item);
            name = item.findViewById(R.id.txtName);
            phone = item.findViewById(R.id.txtPhone);
            service = item.findViewById(R.id.txtService);
            call = item.findViewById(R.id.btnCall);
        }
    }
}
      package com.example.serviceapp;

import android.content.Intent;
import android.os.Bundle;
import android.text.*;
import android.widget.EditText;
import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.*;
import com.google.android.material.floatingactionbutton.FloatingActionButton;
import com.google.firebase.firestore.*;
import java.util.*;

public class MainActivity extends AppCompatActivity {

    RecyclerView recyclerView;
    ProviderAdapter adapter;
    List<ServiceProvider> list = new ArrayList<>();
    FirebaseFirestore db;
    EditText search;

    @Override
    protected void onCreate(Bundle b) {
        super.onCreate(b);
        setContentView(R.layout.activity_main);

        recyclerView = findViewById(R.id.recyclerView);
        search = findViewById(R.id.searchBox);
        FloatingActionButton fab = findViewById(R.id.fabAdd);

        recyclerView.setLayoutManager(new LinearLayoutManager(this));
        adapter = new ProviderAdapter(this, list);
        recyclerView.setAdapter(adapter);

        db = FirebaseFirestore.getInstance();
        loadData();

        fab.setOnClickListener(v ->
                startActivity(new Intent(this, AddProviderActivity.class)));

        search.addTextChangedListener(new TextWatcher() {
            public void beforeTextChanged(CharSequence s,int a,int b,int c){}
            public void afterTextChanged(Editable e){}
            public void onTextChanged(CharSequence s,int a,int b,int c){
                filter(s.toString());
            }
        });
    }

    void loadData() {
        db.collection("providers")
                .addSnapshotListener((v, e) -> {
                    list.clear();
                    if (v != null) {
                        for (DocumentSnapshot d : v) {
                            list.add(d.toObject(ServiceProvider.class));
                        }
                        adapter.notifyDataSetChanged();
                    }
                });
    }

    void filter(String text) {
        List<ServiceProvider> f = new ArrayList<>();
        for (ServiceProvider p : list) {
            if (p.getName().toLowerCase().contains(text.toLowerCase()) ||
                p.getPhone().contains(text)) {
                f.add(p);
            }
        }
        recyclerView.setAdapter(new ProviderAdapter(this, f));
    }
}
          package com.example.serviceapp;

import android.os.Bundle;
import android.widget.*;
import androidx.appcompat.app.AppCompatActivity;
import com.google.firebase.firestore.FirebaseFirestore;

public class AddProviderActivity extends AppCompatActivity {

    EditText name, phone, service, area;
    Button save;
    FirebaseFirestore db;

    @Override
    protected void onCreate(Bundle b) {
        super.onCreate(b);
        setContentView(R.layout.activity_add_provider);

        name = findViewById(R.id.etName);
        phone = findViewById(R.id.etPhone);
        service = findViewById(R.id.etService);
        area = findViewById(R.id.etArea);
        save = findViewById(R.id.btnSave);

        db = FirebaseFirestore.getInstance();

        save.setOnClickListener(v -> {
            ServiceProvider p = new ServiceProvider(
                    name.getText().toString(),
                    phone.getText().toString(),
                    service.getText().toString(),
                    area.getText().toString(),
                    true
            );

            db.collection("providers").add(p);
            finish();
        });
    }
}
          <LinearLayout ... android:orientation="vertical">

    <EditText
        android:id="@+id/searchBox"
        android:hint="Search name or service"/>

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"/>

    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabAdd"
        android:src="@android:drawable/ic_input_add"/>
    </LinearLayout>
      <LinearLayout ... android:orientation="vertical">
    <TextView android:id="@+id/txtName"/>
    <TextView android:id="@+id/txtPhone"/>
    <TextView android:id="@+id/txtService"/>
    <Button android:id="@+id/btnCall" android:text="Call"/>
    </LinearLayout>
      <LinearLayout ... android:orientation="vertical">
    <EditText android:id="@+id/etName" android:hint="Name"/>
    <EditText android:id="@+id/etPhone" android:hint="Phone"/>
    <EditText android:id="@+id/etService" android:hint="Service"/>
    <EditText android:id="@+id/etArea" android:hint="Area"/>
    <Button android:id="@+id/btnSave" android:text="Save"/>
  
    </LinearLayout>
      rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
      
