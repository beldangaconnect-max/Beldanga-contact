<!DOCTYPE html>        
<html lang="bn">        
<head>        
<meta charset="UTF-8">        
<meta name="viewport" content="width=device-width, initial-scale=1.0">        
<title>Beldanga Contact Database</title>        
        
<style>        
*{box-sizing:border-box;}        
body{margin:0;font-family:Arial,sans-serif;background:#f4f6f8;padding-bottom:70px;}        
header{background:#1976d2;color:#fff;padding:16px;text-align:center;}        
.main-title{margin:0;font-size:22px;font-weight:700;}        
.sub-title{margin:4px 0;font-size:13px;opacity:.9;}        
#pageIndicator{margin-top:6px;font-size:12px;background:rgba(255,255,255,.2);display:inline-block;padding:4px 12px;border-radius:20px;}        
        
section{padding:14px;}        
.service{background:#fff;padding:14px;margin:10px 0;border-radius:14px;font-weight:700;box-shadow:0 4px 12px rgba(0,0,0,.12);cursor:pointer;}        
        
.card{background:#fff;padding:16px;margin:12px 0;border-radius:16px;box-shadow:0 6px 16px rgba(0,0,0,.15);position:relative;}        
.edit-btn{position:absolute;top:12px;right:12px;cursor:pointer;opacity:.6;}        
.edit-btn:hover{opacity:1;}        
        
.call{display:block;margin-top:12px;padding:14px;background:#2e7d32;color:#fff;text-align:center;border-radius:12px;text-decoration:none;font-weight:bold;}        
        
.inline-add-btn{        
  width:100%;        
  padding:12px;        
  border-radius:12px;        
  background:#1976d2;        
  color:#fff;        
  border:none;        
  font-weight:bold;        
  margin-bottom:12px;        
}        
        
#inlineAddForm input,#inlineAddForm button{        
  width:100%;        
  padding:12px;        
  margin-bottom:10px;        
  border-radius:8px;        
}        
        
#inlineAddForm button{        
  background:#1976d2;        
  color:#fff;        
  border:none;        
  font-weight:bold;        
}        
        
#bottomNav{position:fixed;bottom:0;left:0;right:0;height:60px;background:#fff;display:flex;border-top:1px solid #ccc;}        
#bottomNav button{flex:1;border:none;background:none;font-weight:bold;}        
</style>        
</head>        
        
<body>        
        
<header>        
  <h1 class="main-title">Beldanga Contact Database</h1>        
  <p class="sub-title">Trusted Local Services of Beldanga</p>        
  <div id="pageIndicator">ЁЯПа Home</div>        
</header>        
        
<!-- LOGIN -->        
        <section id="admin" style="display:none;">
  <h3>ЁЯЫбя╕П Admin Approval Panel</h3>
  <div id="pendingList"></div>
        </section>
<section id="login" style="padding-top:40px;">
<div id="loginBox" style="
  background:#fff;
  max-width:360px;
  margin:0 auto;
  padding:20px;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.15);
  text-align:center;
">
        
    <h3 style="margin:0 0 6px;">рж▓ржЧржЗржи ржХрж░рзБржи</h3>        
    <p style="font-size:13px;opacity:.8;margin-bottom:16px;">        
      ржирж┐ржЬрзЗрж░ рж╕рж╛рж░рзНржнрж┐рж╕ ржпрзЛржЧ ржУ ржПржбрж┐ржЯ ржХрж░рждрзЗ рж▓ржЧржЗржи ржХрж░рзБржи        
    </p>        
        
    <label style="font-size:13px;display:block;text-align:left;margin-bottom:4px;">        
      ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ / ржЗржорзЗржЗрж▓        
    </label>        
    <input        
      id="userId"        
      type="text"        
      placeholder="ржпрзЗржоржи: 9XXXXXXXXX"        
      style="        
        width:100%;        
        padding:12px;        
        border-radius:10px;        
        border:1px solid #ccc;        
        margin-bottom:14px;        
      "        
    >        
        
    <button        
      onclick="login()"        
      style="        
        width:100%;        
        padding:12px;        
        border-radius:12px;        
        background:#1976d2;        
        color:#fff;        
        border:none;        
        font-weight:bold;        
        font-size:15px;        
      "        
    >        
      ЁЯФР OTP ржжрж┐рзЯрзЗ рж▓ржЧржЗржи ржХрж░рзБржи        
    </button>        
        
    <p style="font-size:12px;margin-top:12px;opacity:.7;">        
      ЁЯФТ ржЖржкржирж╛рж░ рждржерзНржп рж╕ржорзНржкрзВрж░рзНржг ржирж┐рж░рж╛ржкржж        
    </p>        
        
  </div>        
</section>        
        
<!-- HOME -->        
<section id="home" style="display:none;">        
  <div class="service" onclick="openService('ржлрж╛рж░рзНржирж┐ржЪрж╛рж░ ржорзЗржХрж╛рж░')">ЁЯкС ржлрж╛рж░рзНржирж┐ржЪрж╛рж░ ржорзЗржХрж╛рж░</div>        
  <div class="service" onclick="openService('ржкрзЗржЗржирзНржЯрж╛рж░')">ЁЯОи ржкрзЗржЗржирзНржЯрж╛рж░</div>        
  <div class="service" onclick="openService('ржЗрж▓рзЗржХржЯрзНрж░рж┐рж╢рж┐рзЯрж╛ржи')">ЁЯТб ржЗрж▓рзЗржХржЯрзНрж░рж┐рж╢рж┐рзЯрж╛ржи</div>        
  <div class="service" onclick="openService('рж░рж╛ржЬржорж┐рж╕рзНрждрзНрж░рж┐')">ЁЯз▒ рж░рж╛ржЬржорж┐рж╕рзНрждрзНрж░рж┐</div>        
  <div class="service" onclick="openService('ржкрзНрж▓рж╛ржорзНржмрж╛рж░')">ЁЯЪ░ ржкрзНрж▓рж╛ржорзНржмрж╛рж░</div>        
  <div class="service" onclick="openService('ржЧрзНрж▓рж╛рж╕ ржлрж┐ржЯрж╛рж░')">ЁЯкЯ ржЧрзНрж▓рж╛рж╕ ржлрж┐ржЯрж╛рж░</div>        
  <div class="service" onclick="openService('ржЕрзНржпрж╛рж▓рзБржорж┐ржирж┐рзЯрж╛ржо ржлрзНржпрж╛ржмрзНрж░рж┐ржХрзЗрж╢ржи')">ЁЯЪк ржЕрзНржпрж╛рж▓рзБржорж┐ржирж┐рзЯрж╛ржо ржлрзНржпрж╛ржмрзНрж░рж┐ржХрзЗрж╢ржи</div>        
  <div class="service" onclick="openService('ржХрзНрж▓рж┐ржирж╛рж░')">ЁЯз╣ ржХрзНрж▓рж┐ржирж╛рж░</div>        
  <div class="service" onclick="openService('ржорзЛржмрж╛ржЗрж▓ рж░рж┐ржкрзЗрзЯрж╛рж░')">ЁЯЫая╕П ржорзЛржмрж╛ржЗрж▓ рж░рж┐ржкрзЗрзЯрж╛рж░</div>        
  <div class="service" onclick="openService('ржЯрзЗржЗрж▓рж╛рж░')">ЁЯз╡ ржЯрзЗржЗрж▓рж╛рж░</div>        
        
  <div class="service" onclick="openService('рж╣рж╛ржЙрж╕ ржХрж┐ржкрж╛рж░')">ЁЯПа рж╣рж╛ржЙрж╕ ржХрж┐ржкрж╛рж░</div>        
  <div class="service" onclick="openService('рж░рж╛ржБржзрзБржирж┐')">ЁЯН│ рж░рж╛ржБржзрзБржирж┐</div>        
  <div class="service" onclick="openService('ржЯрзЗржорзНржкрзЛ / ржкрж┐ржХржЖржк ржнрзНржпрж╛ржи')">ЁЯЪЪ ржЯрзЗржорзНржкрзЛ / ржкрж┐ржХржЖржк ржнрзНржпрж╛ржи</div>        
  <div class="service" onclick="openService('ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржмрзЯ')">ЁЯЫ╡ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржмрзЯ</div>        
  <div class="service" onclick="openService('ржХржорзНржкрж┐ржЙржЯрж╛рж░ рж░рж┐ржкрзЗрзЯрж╛рж░')">ЁЯТ╗ ржХржорзНржкрж┐ржЙржЯрж╛рж░ рж░рж┐ржкрзЗрзЯрж╛рж░</div>        
  <div class="service" onclick="openService('ржлржЯрзЛржЧрзНрж░рж╛ржлрж╛рж░')">ЁЯУ╖ ржлржЯрзЛржЧрзНрж░рж╛ржлрж╛рж░</div>        
  <div class="service" onclick="openService('ржорж╛рж▓рзА')">ЁЯМ┐ ржорж╛рж▓рзА</div>        
  <div class="service" onclick="openService('рж╣рзЛржо ржирж╛рж░рзНрж╕')">ЁЯзСтАНтЪХя╕П рж╣рзЛржо ржирж╛рж░рзНрж╕</div>        
  <div class="service" onclick="openService('ржЗржиржнрж╛рж░рзНржЯрж╛рж░ / ржмрзНржпрж╛ржЯрж╛рж░рж┐ рж╕рж╛рж░рзНржнрж┐рж╕')">ЁЯФЛ ржЗржиржнрж╛рж░рзНржЯрж╛рж░ / ржмрзНржпрж╛ржЯрж╛рж░рж┐ рж╕рж╛рж░рзНржнрж┐рж╕</div>        
  <div class="service" onclick="openService('ржорзБржжрж┐ржЦрж╛ржирж╛ рж╣рзЛржо ржбрзЗрж▓рж┐ржнрж╛рж░рж┐')">ЁЯЫТ ржорзБржжрж┐ржЦрж╛ржирж╛ рж╣рзЛржо ржбрзЗрж▓рж┐ржнрж╛рж░рж┐</div>        
  </section>        
        
<!-- SERVICE PAGE -->        
<section id="servicePage" style="display:none;">        
  <h3 id="serviceTitle"></h3>        
        
  <button class="inline-add-btn" onclick="toggleAddForm()">тЮХ ржирж┐ржЬрзЗржХрзЗ ржпрзЛржЧ ржХрж░рзБржи</button>        
        
  <div id="inlineAddForm" style="display:none;">        
    <input id="name" placeholder="ржирж╛ржо">        
    <input id="area" placeholder="ржПрж▓рж╛ржХрж╛">        
    <input id="phone" placeholder="ржорзЛржмрж╛ржЗрж▓">        
<button type="button" onclick="addSelf()">ржпрзЛржЧ ржХрж░рзБржи</button>        
  </div>        
        
  <div id="serviceContactList"></div>        
</section>        
        
<!-- Bottom Nav -->        
<div id="bottomNav">        
  <button onclick="go('home')">ЁЯПа Home</button>        
  <button onclick="logout()">ЁЯЪк Logout</button>        
</div>      
    <!-- USER PROFILE -->        
<div id="userProfile" style="display:none;">        
        
  <h3 style="margin-top:10px;">ЁЯСд ржЖржкржирж╛рж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓</h3>        
        
  <p style="font-size:14px;">        
    <strong>ржЖржЗржбрж┐:</strong>        
    <span id="profileUserId"></span>        
  </p>        
        
  <button        
    onclick="go('home')"        
    style="        
      width:100%;        
      padding:12px;        
      border-radius:12px;        
      background:#1976d2;        
      color:#fff;        
      border:none;        
      font-weight:bold;        
      margin-top:10px;        
    "        
  >        
    тЮбя╕П рж╕рж╛рж░рзНржнрж┐рж╕ ржжрзЗржЦрзБржи        
  </button>        
        
</div>  
        
<script>      
const ADMIN_ID = "admin@beldanga";        
let currentUser = localStorage.getItem("currentUser");        
let currentService = "";        
        
/* Navigation */        
function go(id){        
  ["login","home","servicePage"].forEach(s=>{        
    const el=document.getElementById(s);        
    if(el) el.style.display="none";        
  });        
  document.getElementById(id).style.display="block";        
  document.getElementById("pageIndicator").innerText =        
    id==="home"?"ЁЯПа Home":id==="servicePage"?currentService:"";        
}        
        
/* Login */
function login(){
  const u = userId.value.trim();
  if(!u){
    alert("ржорзЛржмрж╛ржЗрж▓ ржмрж╛ ржЗржорзЗржЗрж▓ ржжрж┐ржи");
    return;
  if(u === ADMIN_ID){
  go("admin");
  loadPending();
  }

  currentUser = u;
  localStorage.setItem("currentUser", u);

  // тЬЕ Login box hide
  document.getElementById("login").style.display = "none";

  // тЬЕ Profile show
  document.getElementById("userProfile").style.display = "block";
  document.getElementById("profileUserId").innerText = u;

  alert("OTP Verified тЬЕ");
  userId.value = "";
        }
        
/* Logout */        
function logout(){        
  localStorage.removeItem("currentUser");        
  currentUser=null;        
  go("login");        
}        
        
/* Service Open */        
function openService(service){        
  currentService = service;        
  go("servicePage");        
  serviceTitle.innerText = service+" ржХржирзНржЯрж╛ржХрзНржЯ";        
  inlineAddForm.style.display="none";        
  loadServiceContacts();        
}        
        
/* Toggle inline add */        
function toggleAddForm(){        
  if(!currentUser){alert("Login ржХрж░рзБржи");return;}        
  inlineAddForm.style.display =        
    inlineAddForm.style.display==="none"?"block":"none";        
}        
        
/* Add self */        
function addSelf(){        
  if(!currentUser){        
    alert("Login ржХрж░рзБржи");        
    return;        
  }        
        
  const nameEl = document.getElementById("name");        
  const areaEl = document.getElementById("area");        
  const phoneEl = document.getElementById("phone");        
        
  if(!nameEl.value.trim() || !phoneEl.value.trim()){        
    alert("рж╕ржм ржШрж░ ржкрзВрж░ржг ржХрж░рзБржи");        
    return;        
  }        
        
  let data = JSON.parse(localStorage.getItem("contacts") || "[]");        
       // тЭМ ржПржХржЗ user ржПржХржЗ service-ржП ржПржХржмрж╛рж░рзЗрж░ ржмрзЗрж╢рж┐ add ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛
const alreadyAdded = data.find(
  c => c.owner === currentUser && c.work === currentService
);

if(alreadyAdded){
  alert("ржЖржкржирж┐ ржПржЗ рж╕рж╛рж░рзНржнрж┐рж╕рзЗ ржЖржЧрзЗржЗ ржпрзЛржЧ ржХрж░рж╛ ржЖржЫрзЗржиред ржПржбрж┐ржЯ ржХрж░рждрзЗ тЬПя╕П ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред");
  return;
}
        
  data.push({
  name: nameEl.value.trim(),
  work: currentService,
  area: areaEl.value.trim(),
  phone: phoneEl.value.trim(),
  owner: currentUser,
  status: "pending" // тнР NEW
});
        
  localStorage.setItem("contacts", JSON.stringify(data));        
        
  nameEl.value = "";        
  areaEl.value = "";        
  phoneEl.value = "";        
        
  inlineAddForm.style.display = "none";             
  loadServiceContacts();        
  }        
        
  function enableInlineEdit(phone){        
  const card = document.getElementById("card-"+phone);        
  card.querySelector(".view-mode").style.display = "none";        
  card.querySelector(".edit-mode").style.display = "block";        
}        
        
function saveInlineEdit(oldPhone){        
  let all = JSON.parse(localStorage.getItem("contacts") || "[]");        
        
  let idx = all.findIndex(        
    c => c.phone === oldPhone && c.owner === currentUser        
  );        
  if(idx === -1) return;        
        
  const newName = document.getElementById("edit-name-"+oldPhone).value.trim();        
  const newArea = document.getElementById("edit-area-"+oldPhone).value.trim();        
  const newPhone = document.getElementById("edit-phone-"+oldPhone).value.trim();        
        
  if(!newName || !newPhone){        
    alert("ржирж╛ржо ржУ ржлрзЛржи ржЖржмрж╢рзНржпржХ");        
    return;        
  }        
        
  all[idx].name = newName;        
  all[idx].area = newArea;        
  all[idx].phone = newPhone;        
        
  localStorage.setItem("contacts", JSON.stringify(all));        
        
  // ржЖржмрж╛рж░ рж▓рж┐рж╕рзНржЯ reload        
  loadServiceContacts();        
    }        
/* Load service contacts */        
function loadServiceContacts(){        
  let list = document.getElementById("serviceContactList");        
  list.innerHTML = "";        
        
  let all = JSON.parse(localStorage.getItem("contacts") || "[]");        
  let f = all.filter(c => c.work === currentService);        
        
  if(f.length === 0){        
    list.innerHTML = "<p>ржПржЗ рж╕рж╛рж░рзНржнрж┐рж╕рзЗ ржХрзЛржирзЛ ржХржирзНржЯрж╛ржХрзНржЯ ржирзЗржЗ</p>";        
    return;        
  }    
      function approve(index){
  let all = JSON.parse(localStorage.getItem("contacts") || "[]");
  let pending = all.filter(c => c.status === "pending");

  let target = pending[index];
  let realIndex = all.findIndex(
    c => c.phone === target.phone && c.owner === target.owner
  );

  all[realIndex].status = "approved";
  localStorage.setItem("contacts", JSON.stringify(all));

  loadPending();
     function approve(index){
  let all = JSON.parse(localStorage.getItem("contacts") || "[]");
  let pending = all.filter(c => c.status === "pending");

  let target = pending[index];
  let realIndex = all.findIndex(
    c => c.phone === target.phone && c.owner === target.owner
  );

  all[realIndex].status = "approved";
  localStorage.setItem("contacts", JSON.stringify(all));

  loadPending();         
  function loadPending(){
  let list = document.getElementById("pendingList");
  list.innerHTML = "";

  let all = JSON.parse(localStorage.getItem("contacts") || "[]");
  let pending = all.filter(c => c.status === "pending");

  if(!pending.length){
    list.innerHTML = "<p>ржХрзЛржирзЛ pending request ржирзЗржЗ</p>";
    return;
  }

  pending.forEach((c,i)=>{
    list.innerHTML += `
      <div class="card">
        <h4>${c.name} (${c.work})</h4>
        <p>${c.area} | ${c.phone}</p>
        <button onclick="approve(${i})">тЬЕ Approve</button>
      </div>
`;
});
}
        
f.forEach(c=>{        
  list.innerHTML += `        
  <div class="card" id="card-${c.phone}">        
    ${c.owner === currentUser 
  ? `<span class="edit-btn" onclick="enableInlineEdit('${c.phone}')">тЬПя╕П</span>`
  : ``
  }
    <div class="view-mode">        
      <h3>${c.name}</h3>        
      <p>${c.area}</p>        
      ${
  c.status === "approved"
    ? `<a class="call" href="tel:${c.phone}">ЁЯУЮ ржХрж▓ ржХрж░рзБржи</a>`
    : `<p style="color:#ff9800;font-size:13px;">тП│ Admin approval pending</p>`
        }        
    </div>        
        
    <div class="edit-mode" style="display:none;">        
      <input id="edit-name-${c.phone}" value="${c.name}">        
      <input id="edit-area-${c.phone}" value="${c.area}">        
      <input id="edit-phone-${c.phone}" value="${c.phone}">        
      <button onclick="saveInlineEdit('${c.phone}')">ЁЯТ╛ Save</button>        
    </div>        
  </div>        
`;        
});        
  }        
/* Edit */        
function startEdit(phone){        
  let all=JSON.parse(localStorage.getItem("contacts")||"[]");        
  let c=all.find(x=>x.phone===phone && x.owner===currentUser);        
  if(!c)return;        
        
  name.value=c.name;        
  area.value=c.area;        
  phone.value=c.phone;        
        
  all = all.filter(x=>!(x.phone===phone && x.owner===currentUser));        
  localStorage.setItem("contacts",JSON.stringify(all));        
  inlineAddForm.style.display="block";        
}        
        
/* Init */
if(currentUser){
  document.getElementById("login").style.display = "none";
  document.getElementById("userProfile").style.display = "block";
  document.getElementById("profileUserId").innerText = currentUser;

  if(currentUser === ADMIN_ID){
    go("admin");
    loadPending();
  }
}else{
  go("login");
}  
  </script> 
        
</body>        
    </html>
